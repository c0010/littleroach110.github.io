---
layout: post
title: 动态规划之分组的背包问题
category: 技术
tags: 动态规划
keywords:
description:
---

> 本文主要参考“背包九讲”的分组背包技术

### 1. 分组的背包问题描述

分组的背包问题指的是，有N件物品和一个容量为V的背包。第i件物品的费用是c[i]，价值是w[i]。这些物品被划分为若干组，每组中的物品互相冲突，最多选一件。求解将哪些物品装入背包可使这些物品的费用总和不超过背包容量，且价值总和最大。

### 2. 分组的背包问题解决思路

> 分组背包中，可以这样考虑，将每个组当作一个01背包，则外层循环中的相当于原来的N，在容量V的递减循环内，对组内项进行循环划分，然后选取 f[v] 和 f[v-c[i]] + w[i] 的最大项

这个问题变成了每组物品有若干种策略：是选择本组的某一件，还是一件都不选。也就是说设f[k][v]表示前k组物品花费费用v能取得的最大权值，则有：

<img src="http://latex.codecogs.com/gif.latex?f[k][v]=max{f[k-1][v],f[k-1][v-c[i]]+w[i]|物品i属于组k})" title="f[k][v]=max{f[k-1][v],f[k-1][v-c[i]]+w[i]|物品i属于组k}" /> 

使用一维数组，其伪代码如下：

```
for 所有的组k
      for v=V..0  // 将每一个分组当作一个01背包，故使用V的递减
            for 所有的i属于组k
                  f[v]=max{f[v],f[v-c[i]]+w[i]}
```

其中，“for v=V..0”这一层循环必须在“for 所有的i属于组k”之外。这样才能保证每一组内的物品最多只有一个会被添加到背包中。

<hr>

### 参考

【1】P06: 分组的背包问题，http://love-oriented.com/pack/P06.html
